/**
 * EovaUI 2.0.0
 *
 * Copyright (c) EOVA.CN All rights reserved.
 *
 * Eova exclusive, do not use for other projects without authorization.
 * For use with other projects, please contact us: admin@eova.cn
 *
 */
(function(a){a.extend({isNull:function(a){return void 0==a||null==a||""==a||""==a||"undefined"==a||"null"==a||"NULL"==a?!0:!1}});a.str={format:function(a){for(var b=0;b<arguments.length-1;b++)a=a.replace("{"+b+"}",arguments[b+1]);return a},clip:function(a,b){var c="",d=0;if(!a)return c;for(var e=0;e<a.length;e++){var h=a.charAt(e),d=0<=h.charCodeAt()&&128>=h.charCodeAt()?d+1:d+2;if(d>b)return c+"...";c+=h}return c},isNum:function(a){return null!=a&&0<a.length&&0==isNaN(a)?!0:!1},isCn:function(a){return/^([u4E00-u9FA5]|[uFE30-uFFA0])*$/.test(a)?!1:!0},encodeUrl:function(a){return encodeURIComponent(a)},decodeUrl:function(a){return decodeURIComponent(a)}};a.math={percent:function(a,b){return Math.round(a/b*1E4)/100+"%"},random:function(a,b){return Math.max(Math.min(Math.round(Math.random()*(b-a)+a),b),a)}};
    a.json = {
        toObj: function (a) {
            if (typeof a == 'string') {
                return JSON.parse(a)
            } else {
                return a
            }
        }, toStr: function (a) {
            return JSON.stringify(a)
        }
    };
    a.time={format:function(a){var b=new Date;b.setTime(a);a=b.getFullYear();var c=10>b.getMonth()+1?"0"+(b.getMonth()+1):b.getMonth()+1,d=10>b.getDate()?"0"+b.getDate():b.getDate(),e=10>b.getHours()?"0"+b.getHours():b.getHours(),h=10>b.getMinutes()?"0"+b.getMinutes():b.getMinutes(),b=10>b.getSeconds()?"0"+b.getSeconds():b.getSeconds();return a+"-"+c+"-"+d+" "+e+":"+h+":"+b},toWeek:function(a){return a instanceof Date?"\u661f\u671f\u5929 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" ")[a.getDay()]:"Param error,date type!"}};a.verify={rules:{number:[/^\d+$/,"\u8bf7\u586b\u5199\u6570\u5b57"],a_z:[/^[a-z]+$/i,"\u8bf7\u586b\u5199\u5b57\u6bcd"],date:[/^\d{4}-\d{2}-\d{2}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u65e5\u671f\uff0c\u683c\u5f0f:yyyy-mm-dd"],time:[/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u65f6\u95f4\uff0c00:00\u523023:59\u4e4b\u95f4"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u90ae\u7bb1"],url:[/^(https?|s?ftp):\/\/\S+$/i,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u7f51\u5740"],qq:[/^[1-9]\d{4,}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684QQ\u53f7"],idcard:[/^\d{6}(19|2\d)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)?$/,"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u7535\u8bdd\u53f7\u7801"],mobile:[/^1[3-9]\d{9}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u624b\u673a\u53f7"],zipcode:[/^\d{6}$/,"\u8bf7\u68c0\u67e5\u90ae\u653f\u7f16\u7801\u683c\u5f0f"],chinese:[/^[\u0391-\uFFE5]+$/,"\u8bf7\u586b\u5199\u4e2d\u6587\u5b57\u7b26"],account:[/^\w{3,12}$/,"\u8bf7\u586b\u51993-12\u4f4d\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf"],password:[/^[\S]{6,16}$/,"\u8bf7\u586b\u51996-16\u4f4d\u5b57\u7b26\uff0c\u4e0d\u80fd\u5305\u542b\u7a7a\u683c"],money:[/^(?!0\.00)(?:0|[1-9]\d*)(?:\.\d{1,2})?$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u91d1\u989d"]},rule:function(a){alert(a)}}})(jQuery);(function(a){function f(b,c,d){if(b&&null!=b){var e=a.getWidgetType(b);"datagrid"==e?d?b.datagrid(c,d):b.datagrid(c):"treegrid"==e&&(d?b.treegrid(c,d):b.treegrid(c))}}a.extend({I18N:function(b){if(!a.eova.i18n)return b;var c=a.eova.i18n[b];return c?c:b},extendPrototype:function(b,a){var d=function(){};d.prototype=a.prototype;b.prototype=new d;b.prototype.constructor=b},getHtmlOptions:function(b){var a=void 0;(b=b.$dom.data("options"))&&(a=eval("({"+b+"})"));return a},getDomOptions:function(b){var a={};if(b=b.$dom.attr("url"))a.url=b;return a},fuck:function(b){b.attr("readonly","readonly");b.css({background:"rgba(236, 236, 236, 0.35)"});b.unbind()},initEovaUI:function(b,c,d,e){a("div.eova-text").eovatext();a("div.eova-bool").eovabool();a("div.eova-info").eovainfo();a("div.eova-time").eovatime();a("div.eova-find").eovafind();a("div.eova-icons").eovaicons();a("div.eova-combo").eovacombo();a("div.eova-combotree").eovacombotree()},eovaInit:function(b,c,d,e){var h=[];b.each(function(){var b=a._data(this,d);b||(b=new c(this,e),a._data(this,d,b));h.push(b)});return 1==h.length?h[0]:h},eovaAutoHeight:function(b,a){b=b.width();b=parseInt(b/290);if(0!=b){var d=parseInt(a/b);0<a%b&&d++;return 40+25*d}},widgetReLoad:function(b,a){f(b,"reload",a)},widgetLoad:function(b,a){f(b,"load",a)},getWidgetType:function(b){var a="datagrid";-1!=b.context.URL.indexOf("/single_tree")&&(a="treegrid");return a},getWidgetSelected:function(b){var c=a.getWidgetType(b);if("datagrid"==c)return b.datagrid("getSelected");if("treegrid"==c)return b.treegrid("getSelected")},getWidgetSelections:function(b){var c=a.getWidgetType(b);if("datagrid"==c)return b.datagrid("getSelections");if("treegrid"==c)return b.treegrid("getSelections")},widgetClearSelections:function(b){var c=a.getWidgetType(b);if("datagrid"==c)return b.datagrid("clearSelections");if("treegrid"==c)return b.treegrid("clearSelections")},tipwarn:function(a,c){return layer.tips(c,a,{tips:3})},validation:function(b,c){if(!c.isValid){var d=a.tipwarn(a(c.element).parent(),c.msg);a(c.element).keydown(function(b){layer.close(d);a(this).unbind("keydown")})}},slideMsg:function(b,c){a.msg(b)},msg:function(a){layer.msg(a,{zIndex:layer.zIndex,success:function(a){layer.setTop(a)}})},alert:function(a){a&&null!=a&&""!=a||(a="\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01");a.startsWith("info")?(a=a.replace("info:",""),layer.alert(a,{icon:1})):a.startsWith("warn")?(a=a.replace("warn:",""),layer.alert(a,{icon:0})):(a.startsWith("error")&&(a=a.replace("error:","")),layer.alert(a,{icon:2}))},error:function(a){layer.alert(a,{icon:2,zIndex:layer.zIndex,success:function(a){layer.setTop(a)}})},dialogEasy:function(b,c,d,e,h){e||(e=945);h||(h=.9*a(window).height());var g=d.replace(/\//g,"_"),l=g.indexOf("?");-1!=l&&(g=g.substring(0,l-1));var k=parent.sy.modalDialog({id:g,title:c,url:d,buttons:[{id:"eovaSave",text:"\x26nbsp;\x26nbsp;"+a.I18N("\u4fdd\u5b58")+"\x26nbsp;\x26nbsp;",handler:function(){k.find("iframe").get(0).contentWindow.btnSaveCallback(k,b,parent.$)}},{id:"eovaCancel",text:"\x26nbsp;\x26nbsp;"+a.I18N("\u53d6\u6d88")+"\x26nbsp;\x26nbsp;",handler:function(){k.dialog("close")}}]},e,h),f=k.find("iframe").get(0).contentWindow;a(f).keyup(function(a){switch(a.keyCode){case 27:k.dialog("close")}}).keypress(function(a){!a.ctrlKey||10!=a.keyCode&&13!=a.keyCode||f.btnSaveCallback(k,b,parent.$)})},eovatab:function(a,c,d,e){a.addTab(d,c,e)},getScroll:function(a){a=a||window;if(a.document.documentElement&&a.document.documentElement.scrollTop)return{top:a.document.documentElement.scrollTop,left:a.document.documentElement.scrollLeft};if(a.document.body)return{top:a.document.body.scrollTop,left:a.document.body.scrollLeft}},getWindowPosition:function(a){null==a&&(a=top);for(var b=0,d=0,e=window;e!=a;){for(var h=e.parent.document.getElementsByTagName("iframe"),g=0;g<h.length;g++)try{if(h[g].contentWindow==e.window){var l=h[g].getBoundingClientRect(),b=b+l.left,d=d+l.top;break}}catch(k){}e=e.parent}return{left:b,top:d}},functionCallback:function(a){a&&"function"===typeof a&&a.call()},eovatimechanged:function(b,c){b=a("#"+b).eovatime();c=c.getNewDateStr();var d=b.oldValue;console.log("old\x3d"+d);console.log("new\x3d"+c);d!=c&&(b.options.onChange.call(b.$dom,d,c),b.oldValue=c)},watch:function(a,c){if(a in this){var b=this[a];Object.defineProperty(this,a,{set:function(a){var d=b;b=a;c(a,d,this)},get:function(){return b}})}else throw Error("no such property");},compressWhiteSpace:function(a){a=a.replace(/\s+/g," ");a=a.replace(/^\s(.*)/,"$1");a=a.replace(/(.*)\s$/,"$1");a=a.replace(/\s([\x21\x25\x26\x28\x29\x2a\x2b\x2c\x2d\x2f\x3a\x3b\x3c\x3d\x3e\x3f\x5b\x5d\x5c\x7b\x7c\x7d\x7e])/g,"$1");return a=a.replace(/([\x21\x25\x26\x28\x29\x2a\x2b\x2c\x2d\x2f\x3a\x3b\x3c\x3d\x3e\x3f\x5b\x5d\x5c\x7b\x7c\x7d\x7e])\s/g,"$1")}});a.fn.mask=function(b){b||(b=22);1!=a(this).data("mask")&&(b='\x3cdiv class\x3d"divMask" style\x3d"position: absolute; width: 100%; height: '+b+'px; left: 0px; top: 1px; background: rgba(218, 218, 218, 0.4);z-index: 8999"\x3e \x3c/div\x3e',a(this).wrap('\x3cspan style\x3d"position: relative;font-size:16px;"\x3e\x3c/span\x3e'),a(this).parent().append(b),a(this).data("mask",1))};a.fn.unmask=function(){1==a(this).data("mask")&&(a(this).parent().find(".divMask").remove(),a(this).unwrap(),a(this).data("mask",0))}})(jQuery);
var EovaWidget = function () {
    var a = {object: {}, fields: {}, config: {}};
    return {
        data: a, init: function (f, b, c, d) {
            b && "" != b ? a.object = JSON.parse(b) : $.syncGetJson("/meta/object/" + f, function (b) {
                a.object = b
            });
            c && "" != c ? a.fields = JSON.parse(c) : $.syncGetJson("/meta/fields/" + f, function (b) {
                a.fields = b
            });
            a.config = d && "" != d ? JSON.parse(d) : a.object.config ? $.json.toObj(a.object.config) : {}
        }
    }
}();
(function(a){TEXTBOX="textbox";a.fn.eovatext=function(b){var c=[];this.each(function(){var d=a._data(this,TEXTBOX);d?a.extend(d.options,b):(d=new f(this,b),d.render(),d.bindEvents());a._data(this,TEXTBOX,d);c.push(d)});return 1==c.length?c[0]:c};var f=a.fn.eovatext.TextBox=function(b,c){this.ele=b;this.$dom=a(b);this.defaults={width:215,btnTitle:"\u70b9\u51fb\u6e05\u7a7a\u6587\u672c",btnIcon:"\x26#x1006;",isBtn:!0,isReadonly:!1,disable:!1,required:!1,onChange:function(a){}};this.options=a.extend({},this.defaults,a.getHtmlOptions(this),c);this.name=this.$dom.attr("name");this.$dom.removeAttr("name");this.value=this.$dom.attr("value");this.$dom.removeAttr("value")};f.prototype.renderCommon=function(a,c,d){this.name&&a.attr("name",this.name);this.value&&a.val(this.value);this.$valuebox=a;this.options.placeholder&&c.attr("placeholder",this.options.placeholder);this.options.required&&c.attr("required","required");this.$textbox=c;d.attr("title",this.options.btnTitle);this.$btn=d;this.setWidth(this.options.width);this.readonly(this.options.isReadonly)};f.prototype.render=function(){var b=a("\x3cinput type\x3d'text' autocomplete\x3d'off' /\x3e").appendTo(this.$dom),c=a('\x3ci class\x3d"eova-icon"\x3e'+this.options.btnIcon+"\x3c/i\x3e").appendTo(this.$dom);this.options.isBtn||(c.remove(),b.css("padding",2));this.renderCommon(b,b,c)};f.prototype.bindEvents=function(){var a=this.$textbox,c=this.$dom,d=this.options;d.isReadonly||this.$btn.bind("click",function(){a.val("")});var e=!1;a.bind("propertychange input",function(){e||(e=!0,setTimeout(function(){d.onChange.call(c,a.val());e=!1},200))})};f.prototype.getValue=function(){return this.$valuebox.val()};f.prototype.setValue=function(a){this.$valuebox.val(a)};f.prototype.getText=function(){return this.$textbox.val()};f.prototype.setText=function(a){this.$textbox.val(a)};f.prototype.getWidth=function(){return this.$textbox.outerWidth()};f.prototype.setWidth=function(a){this.$textbox.outerWidth(a)};f.prototype.readonly=function(a){a?(this.gray(!0),this.$btn.hide()):(this.gray(!1),this.$btn.show())};f.prototype.gray=function(a){a?(this.$textbox.attr("readonly",!0),this.$textbox.css({background:"rgba(236, 236, 236, 0.35)"})):(this.$textbox.attr("readonly",!1),this.$textbox.css({background:""}))}})(jQuery);(function(a){function f(b){var d=parent.layer,c=d.zIndex;c||(c=2E7);var g=.9*a(parent.window).height();d.open({type:2,id:"eova_find_dialog",title:a.I18N("\u8bf7\u9009\u62e9\u6570\u636e"),content:b.getUrl(),maxmin:!0,area:["720px",g+"px"],btnAlign:"c",shade:.3,zIndex:c+1,btn:[a.I18N("\u786e\u5b9a"),a.I18N("\u6e05\u7a7a\u9009\u62e9")],btn1:function(a,c){c.find("iframe")[0].contentWindow.select(c,b);window.focus();d.close(a)},btn2:function(a,c){c.find("iframe")[0].contentWindow.clear(c,b);window.focus();d.close(a)}})}var b=a.fn.eovatext.TextBox;FINDBOX="findbox";a.fn.eovafind=function(b){var d=[];this.each(function(){var e=a._data(this,FINDBOX);e?a.extend(e.options,b):(e=new c(this,b),e.render(),e.bindEvents(),e.init());a._data(this,FINDBOX,e);d.push(e)});return 1==d.length?d[0]:d};var c=a.fn.eovafind.FindBox=function(d,c){b.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u67e5\u627e\u5185\u5bb9",btnIcon:"\x26#xe615;",isReadonly:!1,multiple:!1,separator:",",url:void 0,exp:void 0,onChange:function(a,b,d){}};this.options=a.extend({},this.options,this.defaults,a.getDomOptions(this),a.getHtmlOptions(this),c);this.code=this.$dom.attr("code");this.$dom.removeAttr("code");this.field=this.$dom.attr("field");this.$dom.removeAttr("field")};a.extendPrototype(c,b);c.prototype.render=function(){var b=a('\x3cinput type\x3d"hidden" /\x3e').appendTo(this.$dom),c=a('\x3cinput type\x3d"text" /\x3e').appendTo(this.$dom),h=a('\x3ci class\x3d"eova-icon"\x3e'+this.options.btnIcon+"\x3c/i\x3e").appendTo(this.$dom);this.renderCommon(b,c,h);c.attr("readonly",!0);console.log("\u7b80\u5355\u624d\u662f\u9ad8\u79d1\u6280\uff0c\u56e0\u4e3a\u7b80\u5355\u6240\u4ee5\u66f4\u5feb\uff1a http://www.eova.cn/")};c.prototype.init=function(){var b=this.$textbox;if(this.getValue()){var c=a.str.format("/widget/findCnByEn?val\x3d{0}",this.getValue());if(this.options.exp)c+=a.str.format("\x26exp\x3d{0}",this.options.exp);else{if(!this.code){b.val(this.getValue());return}c+=a.str.format("\x26eova_code\x3d{0}\x26eova_field\x3d{1}",this.code,this.field)}a.ajax({url:c,dataType:"json",success:function(d){if(0==d.code)b.val(d.data);else{var c=d.text_field,e=[];a.each(eval(d.data),function(a,b){e.push(b[c])});b.val(e.join(","))}}})}else b.val("")};c.prototype.bindEvents=function(){var a=this;this.options.isReadonly||this.$dom.bind("click",function(){f(a)})};c.prototype.getValue=function(){return this.$valuebox.val()};c.prototype.setValue=function(a){this.$valuebox.val(a);this.init()};c.prototype.getText=function(){return this.$textbox.val()};c.prototype.setText=function(a){this.$textbox.val(a)};c.prototype.getUrl=function(){var b=this.options.url;b||(b=a.str.format("/widget/find?\x26eova_code\x3d{0}\x26eova_field\x3d{1}",this.code,this.field));this.options.exp&&(b="/widget/find?exp\x3d"+this.options.exp);this.options.multiple&&(b=a.appendUrlPara(b,"multiple",this.options.multiple));return b=a.appendUrlPara(b,"val",this.getValue())};c.prototype.readonly=function(a){var d=this;a?(b.prototype.readonly.apply(this,arguments),this.$dom.unbind()):(b.prototype.readonly.apply(this,arguments),this.$dom.bind("click",function(){f(d)}))}})(jQuery);(function(a){var f=a.fn.eovatext.TextBox;COMBOBOX="combobox";a.fn.eovacombo=function(d){var c=[];this.each(function(){var g=a._data(this,COMBOBOX);g?a.extend(g.options,d):(g=new b(this,d),g.render(),g.reload(),g.bindEvents());a._data(this,COMBOBOX,g);c.push(g)});return 1==c.length?c[0]:c};var b=a.fn.eovacombo.ComboBox=function(b,d){f.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u9009\u62e9\u5185\u5bb9",btnIcon:"\x26#xe625;",isReadonly:!1,multiple:!1,separator:",",editable:!0,valueField:"id",textField:"cn",textValue:"\u8bf7\u9009\u62e9",url:void 0,exp:void 0,json:void 0,onChange:function(a,b){}};this.options=a.extend({},this.options,this.defaults,a.getDomOptions(this),a.getHtmlOptions(this),d)};a.extendPrototype(b,f);b.prototype.render=function(){var b=a("\x3cinput type\x3d'hidden' /\x3e").appendTo(this.$dom),d=a("\x3cinput type\x3d'text' value\x3d'"+this.options.textValue+"'/\x3e").appendTo(this.$dom),c=a('\x3ci class\x3d"eova-icon"\x3e'+this.options.btnIcon+"\x3c/i\x3e").appendTo(this.$dom),e=a("\x3cdiv class\x3d'eova-combo-panel'\x3e\x3c/div\x3e").appendTo(window.top.document.body);e.css("cursor","pointer");this.$panel=e;this.renderCommon(b,d,c)};b.prototype.bindEvents=function(){function b(){a(window.top.document).find(".eova-combo-panel").is(":visible")&&a(window.top.document).find(".eova-combo-panel").hide()}var c=this,h=this.$textbox,f=this.$panel;if(!this.options.isReadonly){f.unbind(".eovacombo");this.$dom.click(function(a){d(c);a.stopPropagation()});f.bind("mousedown.eovacombo",function(a){return!1});a(document).unbind(".eovacombo").bind("mousedown.eovacombo",function(a){b()});a(parent.document).unbind(".eovacombo").bind("mousedown.eovacombo",function(a){b()});var m=!1;h.bind("propertychange input",function(){m||(m=!0,setTimeout(function(){console.log("combo input event");e(c);m=!1},100))})}};b.prototype.destroy=function(){this.$dom.remove();this.$panel.remove()};b.prototype.reload=function(){var b=this;if(this.options.json)c(b,this.options.json);else{var d=this.$dom.attr("url");this.options.url&&(d=this.options.url);this.options.exp&&(d="/widget/comboJson?exp\x3d"+this.options.exp);d?(b.loading=!0,a.ajax({type:"get",async:!1,url:d,dataType:"json",success:function(a){c(b,a);b.loading=!1},error:function(){alert("\u4e0b\u62c9\u6846\u52a0\u8f7d\u6570\u636e\u5931\u8d25,URL\x3d"+d)}})):a("\x3cdiv\x3e\u6570\u636e\u672a\u52a0\u8f7d\x3c/div\x3e").appendTo(b.$panel)}};b.prototype.getValues=function(){var a=this.$valuebox.val();return""==a?[]:a.split(this.options.separator)};b.prototype.setValue=function(a){this.setValues([a])};b.prototype.setValues=function(a){function b(){d.$panel.children().removeClass("eova-combo-selected");for(var b=[],c=[],e=0;e<a.length;e++){var g=a[e],h=d.$panel.children("div[value\x3d'"+g+"']");""!=h.text()&&(b.push(g),c.push(h.text()),h.addClass("eova-combo-selected"))}e=d.getValues();d.$valuebox.val(b.join(d.options.separator));d.$textbox.val(c.join(d.options.separator));b=d.options;b.multiple?a.length!=e.length&&b.onChange.call(d.$dom,e,a):a[0]!=e[0]&&b.onChange.call(d.$dom,e[0],a[0])}var d=this;d.loading?setTimeout(function(){d.setValues(a)},100):b()};b.prototype.getTexts=function(){var a=this.$textbox.val();return""==a?[]:a.split(this.options.separator)};b.prototype.setText=function(a){return this.setTexts([a])};b.prototype.setTexts=function(a){this.$panel.children().removeClass("eova-combo-selected");for(var b=[],d=[],c=0;c<a.length;c++){var e=a[c],g=this.$panel.children("div:contains('"+e+"')");b.push(g.attr("value"));d.push(e);g.addClass("eova-combo-selected")}a=this.getValues();this.$valuebox.val(b.join(this.options.separator));this.$textbox.val(d.join(this.options.separator));d=this.options;d.multiple?b.length!=a.length&&d.onChange.call(this.$dom,a,values):b[0]!=a[0]&&d.onChange.call(this.$dom,a[0],b[0])};b.prototype.readonly=function(a){var b=this;a?(f.prototype.readonly.apply(this,arguments),this.$dom.unbind()):(f.prototype.readonly.apply(this,arguments),this.$dom.click(function(a){d(b);a.stopPropagation()}))};var c=function(b,d){var c=b.options;b.$panel.empty();c.multiple||a('\x3cdiv value\x3d""\x3e'+c.textValue+"\x3c/div\x3e").appendTo(b.$panel);a.each(d,function(d,e){d=e[c.textField];d=a.str.clip(d,40);a('\x3cdiv value\x3d"'+e[c.valueField]+'"\x3e'+d+"\x3c/div\x3e").appendTo(b.$panel)});b.$panel.children("div").unbind(".eovacombo").bind("mousedown.eovacombo",function(d){var e=a(this),g=e.attr("value");if(c.multiple)if(e.hasClass("eova-combo-selected"))for(var e=b.getValues(),f=0;f<e.length;f++){if(e[f]==g){e.splice(f,1);b.setValues(e);break}}else h(b,g);else h(b,g),b.$panel.hide();d.stopPropagation()});b.getValue()&&(c.multiple?b.setValues(b.getValues()):b.setValue(b.getValue()));a._data(b,COMBOBOX,b)},d=function(b){var d=b.$textbox,c=b.$panel,e=d.offset(),h=a.getWindowPosition(window.top),g=a.getScroll(window);c.css({position:"absolute",overflow:"auto",width:b.$dom.width()});c.css({left:function(){var b=h.left+e.left;b+c.outerWidth()>a(parent.window).outerWidth()+g.left&&(b=a(parent.window).outerWidth()+g.left-c.outerWidth());0>b&&(b=0);return b}(),top:function(){var b=h.top+e.top-g.top;return b=b+c.outerHeight()>a(parent.window).outerHeight()+g.top?b-c.outerHeight()-1:b+d.outerHeight()+1}()});c.show()},e=function(b){var d=b.$textbox.val().toLowerCase();b.$panel.children().removeClass("eova-combo-hide");""!=d&&d!=b.options.textValue&&b.$panel.children().map(function(){-1==a(this).text().toLowerCase().indexOf(d)&&a(this).addClass("eova-combo-hide")})},h=function(a,b){if(a.options.multiple){for(var d=a.getValues(),c=0;c<d.length;c++)if(d[c]==b)return;d.push(b);a.setValues(d)}else a.setValues([b])}})(jQuery);(function(a){function f(b,c){var d=b.options;b.$panel.empty();var e=a.fn.zTree.init(b.$panel,{data:{key:{name:d.nameField},simpleData:{enable:!0,idKey:d.idField,pIdKey:d.pidField,rootPId:d.rootPId}},check:{enable:d.multiple,chkStyle:"checkbox",chkboxType:{Y:"s",N:"ps"}},callback:{onClick:function(a,d,c){c.id!=b.getValue()?b.setValue(c.id):(b.setValue(),e.refresh());b.$panel.hide()},onCheck:function(d,c,e){d=b.$tree.getCheckedNodes(!0);var h=[];b.setValue();a.each(d,function(a,b){b.getCheckStatus().half||h.push(b.id)});b.setValues(h)}}},c);e.expandNode(d.rootPId,!0,!1,!0);b.$tree=e;b.getValue()&&(d.multiple?b.setValues(b.getValues()):b.setValue(b.getValue()));a._data(b,COMBOTREE,b)}var b=a.fn.eovacombo.ComboBox;COMBOTREE="combotree";a.fn.eovacombotree=function(b){var d=[];this.each(function(){var e=a._data(this,COMBOTREE);e?a.extend(e.options,b):(e=new c(this,b),e.render(),e.reload(),e.bindEvents());a._data(this,COMBOTREE,e);d.push(e)});return 1==d.length?d[0]:d};var c=a.fn.eovacombotree.ComboTree=function(d,c){b.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u9009\u62e9\u6811\u8282\u70b9",btnIcon:"\x26#xe62e;",isReadonly:!1,multiple:!1,separator:",",idField:"id",pidField:"pid",nameField:"name",iconField:"iconskip",rootPId:0,url:void 0,exp:void 0,json:void 0,onChange:function(a,b){}};this.options=a.extend({},this.options,this.defaults,a.getDomOptions(this),a.getHtmlOptions(this),c)};a.extendPrototype(c,b);c.prototype.render=function(){var b=a("\x3cinput type\x3d'hidden' /\x3e").appendTo(this.$dom),c=a("\x3cinput type\x3d'text' /\x3e").appendTo(this.$dom),h=a('\x3ci class\x3d"eova-icon"\x3e'+this.options.btnIcon+"\x3c/i\x3e").appendTo(this.$dom),g=a("\x3cdiv id\x3d'ztree_"+this.name+"' class\x3d'eova-combotree-panel ztree'\x3e\x3c/div\x3e").appendTo("body");g.css("cursor","pointer");this.$panel=g;this.renderCommon(b,c,h)};c.prototype.bindEvents=function(){var b=this.$textbox,c=this.$panel;this.options.isReadonly||(c.unbind(".eovacombotree"),this.$dom.click(function(d){a(".eova-combotree-panel").is(":visible")&&a(".eova-combotree-panel").hide();var e=b.offset();c.css({position:"absolute",left:e.left,top:e.top+33,height:300,overflow:"auto",width:a(this).width()});c.show();d.stopPropagation()}),c.bind("mousedown.eovacombotree",function(a){return!1}),a(document).unbind(".eovacombotree").bind("mousedown.eovacombotree",function(b){a(".eova-combotree-panel").is(":visible")&&a(".eova-combotree-panel").hide()}))};c.prototype.reload=function(){var b=this;if(this.options.json)f(b,this.options.json);else{var c=this.$dom.attr("url");this.options.url&&(c=this.options.url);this.options.exp&&(c="/widget/comboTreeJson?exp\x3d"+this.options.exp);(c=a.appendUrlPara(c,"multiple",this.options.multiple))?a.ajax({type:"get",async:!0,url:c,dataType:"json",success:function(a){f(b,a)},error:function(){alert("\u52a0\u8f7d\u6570\u636e\u5931\u8d25,URL\x3d"+c)}}):a("\x3cdiv\x3e\u6570\u636e\u672a\u52a0\u8f7d\x3c/div\x3e").appendTo(b.$panel)}};c.prototype.setValues=function(a){for(var b=[],d=[],c=0;c<a.length;c++){var f=a[c],k=this.$tree.getNodeByParam("id",f,null),n="\u8bf7\u9009\u62e9";null!=k&&(n=k.name,this.options.multiple?this.$tree.checkNode(k,!0,!1):this.$tree.selectNode(k,!0));b.push(f);d.push(n)}c=this.getValues();this.$valuebox.val(b.join(this.options.separator));this.$textbox.val(d.join(this.options.separator));b=this.options;b.multiple?a.length!=c.length&&b.onChange.call(this.$dom,c,a):a[0]!=c[0]&&b.onChange.call(this.$dom,c[0],a[0])};c.prototype.setTexts=function(a){for(var b=[],c=[],d=0;d<a.length;d++){var f=a[d],k=this.$tree.getNodeByParam("name",f,null);this.$tree.selectNode(k,!0);b.push(k.id);c.push(f)}a=this.getValues();this.$valuebox.val(b.join(this.options.separator));this.$textbox.val(c.join(this.options.separator));c=this.options;c.multiple?b.length!=a.length&&c.onChange.call(this.$dom,a,values):b[0]!=a[0]&&c.onChange.call(this.$dom,a[0],b[0])}})(jQuery);(function(a){BOOLBOX="boolbox";a.fn.eovabool=function(b){var c=[];this.each(function(){var d=a._data(this,BOOLBOX);d?a.extend(d.options,b):(d=new f(this,b),d.render());a._data(this,BOOLBOX,d);c.push(d)});return 1==c.length?c[0]:c};var f=a.fn.eovabool.BoolBox=function(b,c){this.$dom=a(b);this.defaults={isCheck:!1,isReadonly:!1,txtTrue:"\u662f",txtFlase:"\u5426",onChange:function(a){}};b=void 0;var d=this.$dom.data("options");d&&(b=eval("({"+d+"})"),this.$dom.removeAttr("data-options"));this.options=a.extend({},this.defaults,b,c);this.name=this.$dom.attr("name");this.value=this.$dom.attr("value")};f.prototype.render=function(){var b=a("\x3cinput type\x3d'hidden' /\x3e").appendTo(this.$dom),c=a("\x3cem\x3e\u5426\x3c/em\x3e").appendTo(this.$dom);a("\x3ci\x3e\x3c/i\x3e").appendTo(this.$dom);this.name&&b.attr("name",this.name);this.$valuebox=b;this.$textbox=c;this.value&&this.setValue(this.value);this.readonly(this.options.isReadonly)};f.prototype.bindEvents=function(){var a=this,c=this.$dom;c.click(function(){c.hasClass("select")?a.setValue(0):a.setValue(1)})};f.prototype.getValue=function(){return this.$valuebox.val()};f.prototype.setValue=function(a){this.$valuebox.val(a);var b=this.$dom,d=this.$textbox,e=this.options;"1"==a||"true"==a?(b.addClass("select"),d.text(e.txtTrue)):(b.removeClass("select"),d.text(e.txtFlase));this.options.onChange.call(this.$dom,a)};f.prototype.isCheck=function(){var a=this.getValue();return"1"==a||"true"==a?!0:!1};f.prototype.check=function(a){a?this.setValue(1):this.setValue(0)};f.prototype.readonly=function(a){var b=this.$dom;a?(b.removeClass("select"),b.unbind()):this.bindEvents()}})(jQuery);(function(a){var f=a.fn.eovatext.TextBox;ICONBOX="iconbox";a.fn.eovaicons=function(c){var d=[];this.each(function(){var e=a._data(this,ICONBOX);e?a.extend(e.options,c):(e=new b(this,c),e.render(),e.bindEvents());a._data(this,ICONBOX,e);d.push(e)});return 1==d.length?d[0]:d};var b=a.fn.eovaicons.IconBox=function(b,c){f.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u9009\u62e9\u56fe\u6807",btnIcon:"\x26#xe702;",isReadonly:!1};this.options=a.extend({},this.options,this.defaults,c)};a.extendPrototype(b,f);var c=function(a,b){var c=parent.layer,d=c.zIndex;d||(d=2E7);c.open({type:2,id:"icon_dialog",title:"\u9009\u62e9\u56fe\u6807",content:"/toIcon",maxmin:!0,area:["805px","540px"],btnAlign:"c",shade:.3,zIndex:d+1,btn:["\u786e\u5b9a"],btn1:function(d,e){e.find("iframe")[0].contentWindow.select(e,a,b);window.focus();c.close(d)}})};b.prototype.bindEvents=function(){var a=this.$textbox,b=this.$btn;this.options.isReadonly?a.attr("readonly","readonly"):this.$dom.bind("click",function(){b.addClass("ext-icon-zoom");c(a,b)})}})(jQuery);(function(a){function f(b,c,f){var d=b.val(),e=b.attr("name");if(d){if(-1!=e.indexOf("formatter")||-1!=e.indexOf("config"))d=a.str.decodeUrl(d);-1!=d.indexOf("function")&&-1!=d.indexOf("return")&&(d=js_beautify(d,4))}var h=parent.layer;(e=h.zIndex)||(e=2E7);h.open({type:1,id:"eova_info_dialog",title:a.I18N("\u5feb\u901f\u7f16\u8f91"),content:'\x3ctextarea id\x3d"eova-info-text" class\x3d"eova-info-text"\x3e'+d+"\x3c/textarea\x3e",maxmin:!0,area:["650px","410px"],btnAlign:"c",shade:.3,zIndex:e+1,btn:[a.I18N("\u786e\u5b9a")],btn1:function(e,g){(d=parent.$("#eova-info-text").val())&&-1!=d.indexOf("function")&&-1!=d.indexOf("return")&&(d=a.compressWhiteSpace(d));g=b.val();b.val(d);c.val(d);window.focus();h.close(e);g!=d&&f.options.onChange.call(f.$dom,g,d)}});a.autoFocus(parent.$("#eova-info-text"))}var b=a.fn.eovatext.TextBox;a.fn.eovainfo=function(b){var d=[];this.each(function(){var e=a._data(this,"infobox");e?a.extend(e.options,b):(e=new c(this,b),e.render(),e.bindEvents());a._data(this,"infobox",e);d.push(e)});return 1==d.length?d[0]:d};var c=a.fn.eovainfo.InfoBox=function(d,c){b.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u7f16\u8f91\u4fe1\u606f",btnIcon:"\x26#xe65f;",isReadonly:!1,onChange:function(a,b){}};this.options=a.extend({},this.options,this.defaults,c)};a.extendPrototype(c,b);c.prototype.render=function(){var b=a("\x3ctextarea style\x3d'display:none'\x3e\x3c/textarea\x3e").appendTo(this.$dom),c=a("\x3cinput type\x3d'text' autocomplete\x3d'off' /\x3e").appendTo(this.$dom),f=a('\x3ci class\x3d"eova-icon"\x3e'+this.options.btnIcon+"\x3c/i\x3e").appendTo(this.$dom);this.renderCommon(b,c,f);this.value&&c.val(this.value)};c.prototype.bindEvents=function(){var a=this,b=this.$textbox,c=this.$valuebox;this.$dom.bind("click",function(){f(c,b,a)})}})(jQuery);(function(a){var f=a.fn.eovatext.TextBox;TIMEBOX="timebox";a.fn.eovatime=function(c){var d=[];this.each(function(){var e=a._data(this,TIMEBOX);e?a.extend(e.options,c):(e=new b(this,c),e.render(),e.bindEvents());a._data(this,TIMEBOX,e);d.push(e)});return 1==d.length?d[0]:d};var b=a.fn.eovatime.TimeBox=function(b,d){f.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u9009\u62e9\u65f6\u95f4",btnIcon:"\x26#xe637;",isReadonly:!1,format:"yyyy-MM-dd HH:mm:ss",onChange:function(a,b){}};this.options=a.extend({},this.options,this.defaults,a.getHtmlOptions(this),d)};a.extendPrototype(b,f);b.prototype.bindEvents=function(){var a=this.$textbox;this.options.isReadonly||(this.$btn.bind("click",function(){a.trigger("click")}),this.oldValue=this.getValue(),this.$dom.attr("onClick","WdatePicker({dateFmt:'"+this.options.format+"', onpicked: function(){$.eovatimechanged('"+this.name+"', $dp.cal)} })"))}})(jQuery);$(function(){setTimeout(function(){if(navigator.onLine){var a=$(".footer a"),f=a.data("app");f&&$.ajax({url:"//www.eova.cn/api/live/"+f,type:"post",data:{copyright:a.text()},error:function(){}})}},18E5)});(function(a){var f=a.fn.eovatext.TextBox;AUTOBOX="autobox";a.fn.eovaauto=function(c){var d=[];this.each(function(){var e=a._data(this,AUTOBOX);e?a.extend(e.options,c):(e=new b(this,c),e.render(),e.$textbox.css("background-color","#EBEBE4"),e.bindEvents());a._data(this,AUTOBOX,e);d.push(e)});return 1==d.length?d[0]:d};var b=a.fn.eovaauto.AutoBox=function(b,d){f.apply(this,arguments);this.defaults={btnTitle:"\u81ea\u589e\u957f\u5b57\u6bb5",disable:!0};this.options=a.extend({},this.options,this.defaults,d)};a.extendPrototype(b,f);b.prototype.bindEvents=function(){}})(jQuery);(function(a){CHECKBOX="checkbox";a.fn.eovacheck=function(b){var c=[];this.each(function(){var d=a._data(this,CHECKBOX);d?a.extend(d.options,b):(d=new f(this,b),d.render());a._data(this,CHECKBOX,d);c.push(d)});return 1==c.length?c[0]:c};var f=a.fn.eovacheck.CheckBox=function(b,c){this.$dom=a(b);this.defaults={isCheck:!1,disable:!1};b=void 0;var d=this.$dom.data("options");d&&(b=eval("({"+d+"})"),this.$dom.removeAttr("data-options"));this.options=a.extend({},this.defaults,b,c);this.name=this.$dom.attr("name");this.value=this.$dom.attr("value")};f.prototype.render=function(){var b=a("\x3cinput type\x3d'checkbox' /\x3e").appendTo(this.$dom);this.name&&b.attr("name",this.name);this.value&&b.attr("value",this.value);this.options.isCheck&&this.setChecked(!0);this.options.disable&&b.attr("disabled","disabled");this.$checkbox=b};f.prototype.getChecked=function(){return this.$checkbox.prop("checked")};f.prototype.setChecked=function(a){this.$checkbox.prop("checked",a)};f.prototype.readonly=function(a){a&&this.$checkbox.attr("readonly",!0)}})(jQuery);
//# sourceMappingURL=eova.min.js.map
